{% extends "gestion/base.html" %}
{% block title %}Detalle de Reserva{% endblock %}

{% block content %}
<h2>Detalle de Reserva</h2>

<ul class="list-group mb-3">
    <li class="list-group-item"><strong>Código de Reserva:</strong> {{ reserva.id }}</li>
    <li class="list-group-item"><strong>Vuelo:</strong> {{ vuelo.codigo_vuelo }} ({{ vuelo.origen }} → {{ vuelo.destino }})</li>
    <li class="list-group-item"><strong>Salida:</strong> {{ vuelo.fecha_salida|date:"d/m/Y H:i" }}</li>
    <li class="list-group-item"><strong>Estado:</strong> {{ reserva.get_estado_display }}</li>
    <li class="list-group-item">
        <strong>Asiento:</strong>
        {% if reserva.asiento %}
            {{ reserva.asiento.numero }}
        {% else %}
            No seleccionado
        {% endif %}
    </li>
</ul>

{# Si aún no eligió asiento y la reserva está pendiente -> botón para seleccionar #}
{% if not reserva.asiento and reserva.estado == 'P' %}
    <a href="{% url 'seleccionar_asiento' reserva_pk=reserva.pk %}" class="btn btn-primary">
        Seleccionar Asiento
    </a>
{% endif %}

{# Si la reserva está confirmada y tiene asiento -> mostrar botón para PDF #}
{% if reserva.estado == 'C' and reserva.asiento %}
    <a href="{% url 'boleto_pdf' reserva.pk %}" class="btn btn-success mt-3">
        Descargar Boleto en PDF
    </a>
{% endif %}

<a href="{% url 'vuelos_disponibles' %}" class="btn btn-link mt-3">← Seguir viendo vuelos</a>
{% endblock %}
